<?php
$this->headTitle('List');

$order_by  = $this->order_by;
$order     = $this->order;
$paginator = $this->paginator;


$url_order = 'ASC';  // the following lines
if ($order_by == 'title') {
    $url_order = $order == 'ASC' ? 'DESC' : 'ASC';
} elseif ($order_by == 'artist') {
    $url_order = $order == 'ASC' ? 'DESC' : 'ASC';
}

$columns = array(
    'transaction_id' => $this->translate('Id'),
    'item_name'      => $this->translate('Item'),
    'group_name'     => $this->translate('Group'),
    'price'          => $this->translate('Price'),
    'currency_html'  => $this->translate('Currency'),
    'date'           => $this->translate('Date'),
    'date_created'   => $this->translate('Created'),
    'id_user'        => $this->translate('User'),
);


?>

<table class="table">
    <tr>
        <?php foreach ($columns AS $key => $label) : ?>
            <th>
                <?php

                $icon = sprintf(
                    '<i class="icon-chevron-%s"></i>',
                    ($url_order == 'ASC' ? 'down' : 'up')
                );

                echo sprintf(
                    '<a href="%s">%s</a>',
                    $this->url('list', array('order_by' => $key, 'order' => $url_order)),
                    $icon . $label
                );

                ?>
            </th>
        <?php endforeach; ?>

    </tr>

    <?php foreach ($this->transactions AS $transaction) : ?>
        <tr>
            <?php foreach ($columns AS $key => $label) : ?>
                <td>
                    <?php
                        echo $transaction->getData($key);
                    ?>
                </td>
            <?php endforeach; ?>
        </tr>
    <?php endforeach; ?>
</table>

<?php

echo $this->paginationControl(
    $paginator, 'Sliding', 'paginator-slide', array('order_by' => $order_by, 'order' => $order)
);

?>
